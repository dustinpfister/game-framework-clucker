(function(Clucker){

try{utils=Clucker?Clucker.utils={}:{}}catch(e){var utils={}}utils.http=function(e){(e=e||{}).url=e.url||"",e.method=e.method||"GET",e.async=void 0===e.async||e.async,e.body=void 0===e.body?null:e.body,e.onDone=e.onDone||utils.noop,e.onError=e.onError||utils.noop,e.responseType=e.responseType||"";var t=new XMLHttpRequest;t.responseType=e.responseType,t.open(e.method,e.url,e.async),t.onreadystatechange=function(){4===t.readyState&&(200<=t.status&&t.status<400?e.onDone.call(t,t.response,t):e.onError.call(t,t))},t.send(e.body)},utils.httpPNG=function(a){(a=a||{}).onDone=a.onDone||utils.noop,a.onError=a.onError||utils.noop,utils.http({url:a.url,responseType:"blob",onDone:function(e,t){var e=window.URL.createObjectURL(e),n=new Image;n.src=e,n.addEventListener("load",function(){a.onDone.call(t,n,t)})},onError:a.onError})},utils.noop=function(){},utils.distance=function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))},utils.boundingBox=function(e,t,n,a,o,i,r,c){return!(t+a<i||i+c<t||e+n<o||o+r<e)},utils.mod=function(e,t){return(e%t+t)%t},utils.XP=function(){function r(e,t){return t=void 0===t?c:t,(Math.pow(e,2)-e)*t/2}function a(e,t,n){var a=t<(a=(i=void 0===i?c:i,(1+Math.sqrt(1+8*e/i))/2))?t:a,o=Math.floor(a),i=r(o+1);return{level:o,levelFrac:a,per:a%1,xp:e,forNext:a===t?1/0:i,toNext:a===t?1/0:i-e}}var c=50;return{parseByLevel:function(e,t,n){return a(r(e,n),t)},parseByXP:a}}(),utils.log=function(e){console.log(e)},utils.logFor=function(e,t,n){(n=n||{}).log=n.log||utils.log,t&&n.log(e)},utils.logOnce=function(){var n=0;return function(e,t){(t=t||{}).log=t.log||utils.log,t.maxCount=void 0===t.maxCount?1:t.maxCount,t.resetCount=void 0!==t.resetCount&&t.resetCount,(n=t.resetCount?0:n)<t.maxCount&&(t.log(e),n+=1)}}(),poolMod=function(){var i={};return i.create=function(e){(e=e||{}).count=e.count||10;for(var t=0,n={objects:[],secsCap:void 0===e.secsCap?1/0:e.secsCap,disableLifespan:e.disableLifespan||!1,data:e.data||{},spawn:e.spawn||function(e,t,n,a){},purge:e.purge||function(e,t,n){},update:e.update||function(e,t,n,a){}};t<e.count;)n.objects.push({active:!1,i:t,x:void 0===e.x?0:e.x,y:void 0===e.y?0:e.y,w:void 0===e.w?32:e.w,h:void 0===e.h?32:e.h,heading:void 0===e.heading?0:e.heading,pps:void 0===e.pps?32:e.pps,lifespan:e.lifespan||3,data:{}}),t+=1;return n},i.spawn=function(e,t,n){var a=function(e){for(var t,n=e.objects.length;n--;)if(!(t=e.objects[n]).active)return t;return!1}(e);return t=t||{},n=n||{},!(!a||a.active)&&(a.active=!0,e.spawn.call(e,a,e,t,n),a)},i.spawnAll=function(t,n,a){return t.objects.forEach(function(e){if(!e.active)return e.active=!0,t.spawn.call(t,e,t,n,a),e}),t.objects},i.purge=function(e,t,n){t.active=!1,e.purge.call(e,t,e,n)},i.update=function(e,t,n){var a,o=e.objects.length;for(n=n||{},t=t>e.secsCap?e.secsCap:t;o--;)(a=e.objects[o]).active&&(e.update.call(e,a,e,n,t),e.disableLifespan||(a.lifespan-=t,a.lifespan=a.lifespan<0?0:a.lifespan,0===a.lifespan&&(a.active=!1,i.purge.call(e,e,a,n))))},i.setActiveStateForAll=function(e,t){t=void 0!==t&&t;for(var n=e.objects.length;n--;)e.objects[n].active=t},i.moveByPPS=function(e,t){e.x+=Math.cos(e.heading)*e.pps*t,e.y+=Math.sin(e.heading)*e.pps*t},i.checkBounds=function(e,t){return!(e.x>=t.width||e.x<-1*e.w||e.y>t.height||e.y<-1*e.h)},i.boundingBox=function(e,t){return utils.boundingBox(e.x,e.y,e.w,e.h,t.x,t.y,t.w,t.h)},i.wrap=function(e,t,n){utils.boundingBox(e.x,e.y,e.w,e.h,-1*(n=void 0===n?32:n),-1*n,(t=t||{x:0,y:0,width:640,height:480}).width+n,t.height+n)||(e.x=utils.mod(e.x+n,t.width+2*n)-n,e.y=utils.mod(e.y+n,t.height+2*n)-n)},i.getOverlaping=function(e,t){var n,a=0,o=[];if(len=t.objects.length,e.active)for(;a<len;)e!=(n=t.objects[a])&&n.active&&utils.boundingBox(e.x,e.y,e.w,e.h,n.x,n.y,n.w,n.h)&&o.push(n),a+=1;return o},i.getActiveCount=function(e){return e.objects.reduce(function(e,t){return t.active?e+1:e},0)},i.getActiveObjects=function(e){return e.objects.reduce(function(e,t){return t.active&&e.push(t),e},[])},i}();try{Clucker&&(Clucker.poolMod=poolMod)}catch(e){}!function(a){var i={},e=i.drawMethods={};e.clear=function(e,t,n,a){t.clearRect(-2,-2,n.width+2,n.height+2)},e.background=function(e,t,n,a,o){e=o||e.background||"black";"string"==typeof e&&(t.fillStyle=e,t.fillRect(-2,-2,n.width+2,n.height+2)),"object"==typeof e&&t.drawImage(e,-1,-1,n.width+2,n.height+2)},e.print=function(e,t,n,a,o,i,r,c){(c=c||{}).fontSize=c.fontSize||10,t.fillStyle=c.fillStyle||"black",t.textBaseline=c.baseLine||"top",t.textAlign=c.align||"left",t.font=c.fontSize+"px arial",t.fillText(o,i,r)},e.cell=function(e,t,n,a,o,i,r){o=e.spriteSheets[o],i=o.cells[i];t.drawImage(o.image,i.x,i.y,i.w,i.h,r.x,r.y,r.w,r.h)},e.points=function(e,s,t,n,a,o,i,l){l=l||{},s.save(),s.translate(o,i),a.forEach(function(e){var t,n=e.length,a=void 0===l.close||l.close,o=void 0===l.fill?"black":l.fill,i=void 0===l.stroke?"white":l.stroke,r=void 0===l.lineWidth?3:l.lineWidth,c=2;for(s.beginPath(),s.moveTo(e[0],e[1]);c<n;)"number"==typeof(t=e[c])?(s.lineTo(t,e[c+1]),c+=2):("close"===(t=t.split(":"))[0]&&(a="true"===t[1]),"stroke"===t[0]&&(i=t[1]||!1),"fill"===t[0]&&(o=t[1]||!1),"lineWidth"===t[0]&&(r=t[1]||1),c+=1);s.lineWidth=r,a&&s.closePath(),o&&(s.fillStyle=o,s.fill()),i&&(s.strokeStyle=i,s.stroke())}),s.restore()};var o=i.pointsMethods={};o.box=function(e,t,n,a,o){t-=a/4,n-=o/4;return[[t,n,t+a/2,n,t+a/2,n+o/2,t,n+o/2]]};function r(e){var a,o,i,t=(o=(a=e).state,i=e.events,function(e){var t=c(e),n=null;e.preventDefault(),"mousedown"!==e.type&&"touchstart"!==e.type||(n=i.pointerStart),"mousemove"!==e.type&&"touchmove"!==e.type||(n=i.pointerMove),(n="mouseup"===e.type||"touchend"===e.type?i.pointerEnd:n)&&n.call(o,e,t,o,a)}),n=e[e.length-1].canvas,e={passive:!1};n.addEventListener("mousedown",t,e),n.addEventListener("mousemove",t,e),n.addEventListener("mouseup",t,e),n.addEventListener("touchstart",t,e),n.addEventListener("touchmove",t,e),n.addEventListener("touchend",t,e)}var c=function(e){var t=e.target,n=t.getBoundingClientRect(),n={x:(e.changedTouches?e.changedTouches[0]:e).clientX-n.left,y:(e.changedTouches?e.changedTouches[0]:e).clientY-n.top,bx:n};return n.x=Math.floor(n.x/t.scrollWidth*t.width),n.y=Math.floor(n.y/t.scrollHeight*t.height),n};a.createLayerStack=function(e){var t={length:void 0===(e=e||{}).length?2:e.length,container:e.container||document.getElementById("canvas-app")||document.body,events:e.events||{},state:e.state||{},background:e.background||"blue",images:[],spriteSheets:{}};"string"==typeof t.container&&(t.container=document.querySelector(t.container));for(var n={container:t.container,append:!0,width:e.width||320,height:e.height||240},a=0;a<t.length;)t[a]=function(e){(e=e||{}).append=void 0===e.append||e.append;var t={};return t.container=e.container||document.getElementById("canvas-app")||document.body,"string"==typeof t.container&&(t.container=document.querySelector(t.container)),t.canvas=document.createElement("canvas"),t.ctx=t.canvas.getContext("2d"),t.canvas.className="canvas_layer",t.canvas.width=void 0===e.width?320:e.width,t.canvas.height=void 0===e.height?240:e.height,t.ctx.translate(.5,.5),t.canvas.onselectstart=function(){return!1},e.append&&t.container.appendChild(t.canvas),t}(n),t[a].i=a,a+=1;return r(t),t},a.draw=function(e,t,n){var a=e[n],o=[e,a.ctx,a.canvas,a],a=[];3<arguments.length&&(a=Array.prototype.slice.call(arguments,3,arguments.length)),i.drawMethods[t].apply(e,o.concat(a))},a.createPoints=function(e,t){var n=[e],a=Array.prototype.slice.call(arguments,2,arguments.length);return o[t].apply(e,n.concat(a))},a.load=function(e){Object.keys(e).forEach(function(t){e[t].forEach(function(e){i[t][e.name]=e.method})})},a.createSpriteSheet=function(e,t,n,a){var o={name:t,imageIndices:null,cells:[]};"number"==typeof n&&(o.imageIndices=[],o.imageIndices.push(n)),"object"==typeof n&&(o.imageIndices=n),"object"==typeof a&&(o.cells=a),"function"==typeof a&&(o.cells=a.call(e,o.imageIndices,o,e)),e.spriteSheets[t]=o},a.createSpriteSheetGrid=function(e,t,n,l,u){l=void 0===l?32:l,u=void 0===u?32:u,a.createSpriteSheet(e,t,n,function(e,t,n){for(var a,o,e=n.images[e[0]],i=Math.floor(e.width/l),r=i*Math.floor(e.height/u),c=0,s=[];c<r;)a=c%i,o=Math.floor(c/i),s.push({x:l*a,y:u*o,w:l,h:u}),c+=1;return s})}}(void 0===this.Clucker?this.canvasMod={}:Clucker.canvasMod={});try{var canvasMod;Clucker&&(canvasMod=Clucker.canvasMod)}catch(e){}canvasMod.load({pointsMethods:[{name:"circle",method:function(e,t,n,a,o){return canvasMod.createPoints(e,"oval",t,n,a,a,o=void 0===o?100:o)}},{name:"oval",method:function(e,t,n,a,o,i){i=void 0===i?100:i;for(var r,c,s=[[]],l=0;l<i;)c=2*Math.PI/i*l,r=t+Math.cos(c)*a,c=n+Math.sin(c)*o,s[0].push(r,c),l+=1;return s}}]}),canvasMod.load({drawMethods:[{name:"pool",method:function(e,t,n,a,o,i){canvasMod.draw(e,"pool-imgd",a.i,o,i)}},{name:"pool-solid",method:function(e,t,n,a,o,i){i=i||{},o.objects.forEach(function(e){t.fillStyle=i.fillStyle||e.data.fillStyle||"white",t.strokeStyle=i.strokeStyle||e.data.strokeStyle||"black",(e.active||i.drawAll)&&(t.beginPath(),t.rect(e.x,e.y,e.w,e.h),t.fill(),t.stroke())})}},{name:"pool-imgd",method:function(e,a,t,n,o,i){i=i||{},o.objects.forEach(function(e){var t=i.image||e.data.image||!1,n=i.imgD||e.data.imgD||{};a.fillStyle=i.fillStyle||e.data.fillStyle||"white",a.strokeStyle=i.strokeStyle||e.data.strokeStyle||"black",(e.active||i.drawAll)&&(t?a.drawImage(t,n.x,n.y,n.w,n.h,e.x,e.y,e.w,e.h):(a.beginPath(),a.rect(e.x,e.y,e.w,e.h),a.fill(),a.stroke()))})}},{name:"sprite",method:function(e,t,n,a,o,i){var r=(i=i||{}).sheetKey||o.data.sheetKey||"default",c=0;0<=o.data.cellIndex&&(c=o.data.cellIndex),0<=i.cellIndex&&(c=i.cellIndex),t.globalAlpha=void 0===o.data.alpha?1:o.data.alpha;var s=e.spriteSheets[r];s?(o.active||i.drawAll)&&(r=void 0===o.data.imageIndex?0:o.data.imageIndex,r=e.images[s.imageIndices[r]],c=s.cells[c],t.drawImage(r,c.x,c.y,c.w,c.h,o.x,o.y,o.w,o.h)):canvasMod.draw(e,"pool-solid",a.i,pool,i)}},{name:"pool-sprite",method:function(t,e,n,a,o,i){o.objects.forEach(function(e){canvasMod.draw(t,"sprite",a.i,e,{})}),e.globalAlpha=1}}]}),canvasMod.load({drawMethods:[{name:"button",method:function(e,t,n,a,o){t.fillStyle="white",t.strokeStyle="black",t.beginPath(),t.rect(o.x,o.y,o.w,o.h),t.fill(),t.stroke();var i=o.x+o.w/2,t=o.y+o.h/2;canvasMod.draw(e,"print",a.i,o.desc,i,t,{align:"center",baseLine:"middle"})}},{name:"stateButtons",method:function(t,e,n,a,o){var i=o.states[o.currentState];Object.keys(i.buttons).forEach(function(e){e=i.buttons[e];canvasMod.draw(t,"button",a.i,e)})}}]}),function(t){t.smCreateMin=function(e){return{currentState:(e=e||{}).currentState||"",states:e.states||{},events:e.events||{}}};function a(e,t,n,a){var o,i=a.states[a.currentState];i&&(o=i.events[e])&&o.call(a,t,n,a)}function o(e){gameFrame.smPushState(e,{name:"loader",start:function(e){canvasMod.draw(e.layers,"background",0),e.images=[];var a=e.layers.images=[];e.loader;if(e.loader.images)for(var t=0;t<e.loader.images.count;)!function(n){utils.httpPNG({url:e.loader.images.baseURL+"/"+n+".png",onDone:function(e,t){a[n]=e},onError:function(){console.log("error"),e.images[n]=new Image,a[n]=new Image}})}(t),t+=1},update:function(e,t){e.layers.images.reduce(function(e,t){return void 0===t?e:e+1},0)===e.loader.images.count&&gameFrame.smSetState(e,e.loader.startState||"game")},draw:function(e,t){var n=t[1].ctx,a=t[1].canvas,o=a.width/2,i=a.height/2;canvasMod.draw(t,"clear",1),e.loader.images&&(n.fillStyle="white",n.strokeStyle="black",n.beginPath(),n.rect(0,i-10,a.width*(e.images.length/e.loader.images.count),10),n.fill(),n.stroke(),canvasMod.draw(t,"print",1,e.images.length+" / "+e.loader.images.count,o,15+i,{align:"center",fontSize:30}))}})}t.smCreateMain=function(e){var n=t.smCreateMin(e=e||{});return n.ver=e.ver||"",n.game=e.game||{},n.fps=void 0===e.fps?30:e.fps,n.loader=e.loader||{},n.images=[],n.events=e.events||{pointerStart:function(e,t,n){!function(e,t,n){for(var a,o=n.states[n.currentState],i=Object.keys(o.buttons),r=0,c=i.length;r<c;)a=o.buttons[i[r]],utils.boundingBox(a.x,a.y,a.w,a.h,t.x,t.y,1,1)&&a.onClick.call(n,e,t,n,a),r+=1}(e,t,n),a("pointerStart",e,t,n)},pointerMove:function(e,t,n){a("pointerMove",e,t,n)},pointerEnd:function(e,t,n){a("pointerEnd",e,t,n)}},n.layers=canvasMod.createLayerStack({length:void 0===e.canvasLayers?3:e.canvasLayers,container:e.canvasContainer||document.getElementById("canvas-app")||document.body,events:n.events,state:n,width:e.width,height:e.height}),n.debugMode=e.debugMode||!1,n.secs=0,n.stopLoop=!1,n.lt=new Date,n.loader.images&&o(n),n.loop=function(){var e,t=new Date;n.secs=(t-n.lt)/1e3,state=n.states[n.currentState]||{},n.secs>=1/n.fps&&((e=state.update)&&e.call(n,n,n.secs),(e=state.draw)&&e.call(n,n,n.layers),n.lt=t),n.stopLoop||requestAnimationFrame(n.loop)},n},t.smPushState=function(e,t){var n={name:t.name||"state_"+Object.keys(e.states).length};return n.buttons=t.buttons||{},n.start=t.start||function(){},n.end=t.end||function(){},n.update=t.update||function(){},n.draw=t.draw||function(){},n.events=t.events||{},e.states[n.name]=n},t.smSetState=function(e,t){var n=e.states[e.currentState];!n||(n=n.end)&&n.call(e,e),e.currentState=t;t=(t=e.states[e.currentState]).start;t&&t.call(e,e)}}(void 0===this.Clucker?this.gameFrame={}:Clucker.gameFrame={});try{var gameFrame;Clucker&&(gameFrame=Clucker.canvasMod)}catch(e){}
}(this['Clucker'] = {ver:'0.5.23'}));