(function(Clucker){

try{utils=Clucker?Clucker.utils={}:{}}catch(t){var utils={}}utils.http=function(t){(t=t||{}).url=t.url||"",t.method=t.method||"GET",t.async=void 0===t.async||t.async,t.body=void 0===t.body?null:t.body,t.onDone=t.onDone||utils.noop,t.onError=t.onError||utils.noop,t.responseType=t.responseType||"";var n=new XMLHttpRequest;n.responseType=t.responseType,n.open(t.method,t.url,t.async),n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<400?t.onDone.call(n,n.response,n):t.onError.call(n,n))},n.send(t.body)},utils.httpPNG=function(e){(e=e||{}).onDone=e.onDone||utils.noop,e.onError=e.onError||utils.noop,utils.http({url:e.url,responseType:"blob",onDone:function(t,n){var t=window.URL.createObjectURL(t),o=new Image;o.src=t,o.addEventListener("load",function(){e.onDone.call(n,o,n)})},onError:e.onError})},utils.noop=function(){},utils.distance=function(t,n,o,e){return Math.sqrt(Math.pow(t-o,2)+Math.pow(n-e,2))},utils.boundingBox=function(t,n,o,e,i,r,u,s){return!(n+e<r||r+s<n||t+o<i||i+u<t)},utils.mod=function(t,n){return(t%n+n)%n},utils.XP=function(){function u(t,n){return n=void 0===n?s:n,(Math.pow(t,2)-t)*n/2}function e(t,n,o){var e=n<(e=(r=void 0===r?s:r,(1+Math.sqrt(1+8*t/r))/2))?n:e,i=Math.floor(e),r=u(i+1);return{level:i,levelFrac:e,per:e%1,xp:t,forNext:e===n?1/0:r,toNext:e===n?1/0:r-t}}var s=50;return{parseByLevel:function(t,n,o){return e(u(t,o),n)},parseByXP:e}}(),utils.log=function(t){console.log(t)},utils.logFor=function(t,n,o){(o=o||{}).log=o.log||utils.log,n&&o.log(t)},utils.logOnce=function(){var o=0;return function(t,n){(n=n||{}).log=n.log||utils.log,n.maxCount=void 0===n.maxCount?1:n.maxCount,n.resetCount=void 0!==n.resetCount&&n.resetCount,(o=n.resetCount?0:o)<n.maxCount&&(n.log(t),o+=1)}}(),poolMod=function(){var r={};return r.create=function(t){(t=t||{}).count=t.count||10;for(var n=0,o={objects:[],secsCap:void 0===t.secsCap?1/0:t.secsCap,disableLifespan:t.disableLifespan||!1,data:t.data||{},spawn:t.spawn||function(t,n,o,e){},purge:t.purge||function(t,n,o){},update:t.update||function(t,n,o,e){}};n<t.count;)o.objects.push({active:!1,i:n,x:void 0===t.x?0:t.x,y:void 0===t.y?0:t.y,w:void 0===t.w?32:t.w,h:void 0===t.h?32:t.h,heading:void 0===t.heading?0:t.heading,pps:void 0===t.pps?32:t.pps,lifespan:t.lifespan||3,data:{}}),n+=1;return o},r.spawn=function(t,n,o){var e=function(t){for(var n,o=t.objects.length;o--;)if(!(n=t.objects[o]).active)return n;return!1}(t);return n=n||{},o=o||{},!(!e||e.active)&&(e.active=!0,t.spawn.call(t,e,t,n,o),e)},r.spawnAll=function(n,o,e){return n.objects.forEach(function(t){if(!t.active)return t.active=!0,n.spawn.call(n,t,n,o,e),t}),n.objects},r.purge=function(t,n,o){n.active=!1,t.purge.call(t,n,t,o)},r.update=function(t,n,o){var e,i=t.objects.length;for(o=o||{},n=n>t.secsCap?t.secsCap:n;i--;)(e=t.objects[i]).active&&(t.update.call(t,e,t,o,n),t.disableLifespan||(e.lifespan-=n,e.lifespan=e.lifespan<0?0:e.lifespan,0===e.lifespan&&(e.active=!1,r.purge.call(t,t,e,o))))},r.setActiveStateForAll=function(t,n){n=void 0!==n&&n;for(var o=t.objects.length;o--;)t.objects[o].active=n},r.moveByPPS=function(t,n){t.x+=Math.cos(t.heading)*t.pps*n,t.y+=Math.sin(t.heading)*t.pps*n},r.checkBounds=function(t,n){return!(t.x>=n.width||t.x<-1*t.w||t.y>n.height||t.y<-1*t.h)},r.boundingBox=function(t,n){return utils.boundingBox(t.x,t.y,t.w,t.h,n.x,n.y,n.w,n.h)},r.wrap=function(t,n,o){utils.boundingBox(t.x,t.y,t.w,t.h,-1*(o=void 0===o?32:o),-1*o,(n=n||{x:0,y:0,width:640,height:480}).width+o,n.height+o)||(t.x=utils.mod(t.x+o,n.width+2*o)-o,t.y=utils.mod(t.y+o,n.height+2*o)-o)},r.getOverlaping=function(t,n){var o,e=0,i=[];if(len=n.objects.length,t.active)for(;e<len;)t!=(o=n.objects[e])&&o.active&&utils.boundingBox(t.x,t.y,t.w,t.h,o.x,o.y,o.w,o.h)&&i.push(o),e+=1;return i},r.getActiveCount=function(t){return t.objects.reduce(function(t,n){return n.active?t+1:t},0)},r.getActiveObjects=function(t){return t.objects.reduce(function(t,n){return n.active&&t.push(n),t},[])},r}();try{Clucker&&(Clucker.poolMod=poolMod)}catch(t){}
}(this['Clucker'] = {}));